[null,{"name":"giveawayCheck","temp":"10","event-type":"0","_id":"eavvT","actions":[{"behavior":"0","interpretation":"1","code":"const fs = require('fs');\nconst Discord = require('discord.js');\nlet giveawaysDue = [];\nvar timeNow = Math.floor(Date.now() / 1000);\nvar counter = 0;\nvar interval;\nif (globalVars(\"giveawayRan\") == null) {\n    this.storeValue(1,3,\"giveawayRan\",cache);\n\n    fs.readFile('./data/giveawayData.json', async function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data);\n    \n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                let giveaways = data[key];\n                let dueGive = await giveaways.filter(({\n                    finishUnix\n                }) => finishUnix <= timeNow);\n                if (dueGive.length > 0) {\n                    dueGive.forEach(async f => {\n                        giveawaysDue.push(f);\n                        giveaways.splice(giveaways.findIndex(e => e.id === f.id), 1)\n                    });\n    \n                    fs.writeFile(\"./data/giveawayData.json\", JSON.stringify(data), function(err) {\n                        if (err) {\n                            return console.log(err);\n                        }\n                    });\n                }\n            }\n        }\n        if (giveawaysDue.length > 0) {\n            interval = setInterval(drawWinners, 2000);\n        }\n        \n    })\n}\n\nasync function drawWinners() {\n        var channelToFetch = await client.channels.get(giveawaysDue[counter][\"channel\"]);\n        if (channelToFetch != null) {\n            var giveawayMessage = await channelToFetch.fetchMessage(giveawaysDue[counter][\"giveawayMessageID\"]);\n            var giveawayUsers = await giveawayMessage.reactions.get('üéâ').fetchUsers();\n            giveawayUsers = giveawayUsers.array();\n            giveawayUsers = await giveawayUsers.filter(object => object.id != client.user.id);\n            var numberOfWinners = parseInt(giveawaysDue[counter][\"winner\"]);\n            var gw = giveawayMessage.embeds[0];\n\n            var giveawayEmbed = new Discord.RichEmbed({\n                color: 0x000000,\n                author: {\n                    name: 'üéâ Giveaway zako≈Ñczony üéâ',\n                    icon_url: (client || this.getDBM().Bot.bot).user.avatarURL\n                },\n                description: gw.description,\n                footer: {\n                    text: gw.footer.text\n                }\n            })\n            var winnerArray = [];\n            var winnerText = \"\";\n            if (giveawayUsers.length > 0) {\n                if (giveawayUsers.length > numberOfWinners) {\n                    for (var i = 0; i < numberOfWinners; i++) {\n                        var randomNumber = Math.floor(Math.random() * giveawayUsers.length);\n                        var randomuser = giveawayUsers[randomNumber];\n                        winnerArray.push(randomuser);\n                        giveawayUsers.splice(giveawayUsers.indexOf(randomNumber), randomNumber);\n                    }\n                } else if (giveawayUsers.length <= numberOfWinners) {\n                    for (i = 0; i < giveawayUsers.length; i++) {\n                        winnerArray.push(giveawayUsers[i]);\n                    }\n                }\n\n                for (i = 0; i < winnerArray.length; i++) {\n                    winnerText = winnerText + winnerArray[i] + '\\n';\n                }\n\n                giveawayEmbed.description = giveawayEmbed.description + `\\n\\nWygrani..\\n${winnerText}`;\n                giveawayMessage.edit(giveawayEmbed)\n                channelToFetch.send(`üéâ Gratulacje! üéâ \\n ${winnerText} \\nWygrali oni **${giveawaysDue[counter][\"itemGivingAway\"]}**`)\n\n            } else {\n                giveawayEmbed.description = giveawayEmbed.description + \"\\n\\nNo one entered the giveaway and thus no one won.\"\n                giveawayMessage.edit(giveawayEmbed);\n                channelToFetch.send(`üéâ Giveaway Ended üéâ\\n\\nNo one entered the giveaway and thus no one won.`)\n            }\n        }\n        counter += 1;\n        if (counter >= giveawaysDue.length) {\n            clearInterval(interval);\n        }\n    }","storage":"0","varName":"","name":"Run Script"},{"time":"7","measurement":"1","name":"Wait"},{"storage":"3","varName":"giveawayRan","changeType":"0","value":"null","name":"Control Variable"}],"temp2":"America/New_York"},{"name":"MemberActivity","temp":"1","event-type":"3","_id":"wNOKR","actions":[{"info":"3","storage":"1","varName2":"ser","name":"Store Bot Client Info"},{"info":"0","find":"579402829744046092","storage":"1","varName":"g1","name":"Find Server"},{"server":"1","varName":"g1","info":"17","storage":"1","varName2":"memcount","name":"Store Server Info"},{"activity":"0","nameText":"üíúStartuje ju≈º nied≈Çugo!","url":"","stat":"0","name":"Set Bot Activity"},{"time":"5","measurement":"1","name":"Wait"},{"activity":"2","nameText":"‚è∞Serwery: ${tempVars(\"ser\")} ‚ùó /help","url":"","stat":"0","name":"Set Bot Activity"}]},{"name":"mentionprefix","permissions":"NONE","restriction":"0","_id":"hIqhq","actions":[{"behavior":"1","interpretation":"1","code":"const Files = this.getDBM().Files.data;\nconst separator = new RegExp(Files.settings.separator,\"g\");\nconst args = msg.content.split(separator);\nconst prefixMention = new RegExp(`^<@!?${client.user.id}>( |)$`);\nif (args[0].match(prefixMention)){\n  const allData = Files.commands;\n  let cmd = false;\n  Object.keys(allData).forEach(function(command) {\n    if (allData[command]) {\n      if (allData[command].name == args[1]) {\n        cmd = allData[command];\n      }\n    }\n  });\n  if (cmd) {\n    let restriction = true;\n    console.log(parseInt(cmd.restriction))\n    switch (parseInt(cmd.restriction)) {\n      case 0:\n        restriction = false;\n        break;\n      case 1:\n        if (cache.server) {\n          if (cmd.permissions != \"NONE\") {\n            if (member.permissions.has(cmd.permissions)) {\n              restriction = false;\n            }\n          } else {\n            restriction = false;\n          }\n        }\n        break;\n      case 2:\n      case 4:\n        if (msg.author.id == Files.settings.ownerId) {\n          restriction = false;\n        };\n        break;\n      case 3:\n        if (cache.server) {\n          restriction = false;\n        };\n        break;\n    };\n    if (!restriction) {\n      args.shift();\n      args[0] = Files.settings.tag + args[0]\n      cache.msg.content = args.join(\" \");\n      const cache2 = {\n        actions: cmd.actions,\n        index: -1,\n        temp: {},\n        server: cache.server,\n        msg: cache.msg\n      }\n      this.callNextAction(cache2);\n    }\n  }\n}","storage":"0","varName":"","name":"Run Script"}],"comType":"3","event-type":"0"},{"name":"giveawayStart","temp":"","event-type":"1","_id":"jEKcf","actions":[{"behavior":"0","interpretation":"0","code":"const fs = require('fs');\n\nif (globalVars(\"giveawayStartRan\") == null) {\n    this.storeValue(1, 3, \"giveawayStartRan\", cache);\n    if (!fs.existsSync('./data/giveawayData.json')) {\n        fs.writeFile(\"./data/giveawayData.json\", \"{}\", function(err) {\n            if (err) {\n                return console.log(err);\n            }\n        });\n    }\n}","storage":"0","varName":"","name":"Run Script"}]},{"name":"gstart","permissions":"NONE","restriction":"1","_id":"UaKps","actions":[{"message":"0","varName":"","info":"0","ParamN":"1","separator":"","storage":"1","varName2":"itemGiving","name":"Store Message Params"},{"message":"0","varName":"","info":"0","ParamN":"2","separator":"","storage":"1","varName2":"time","name":"Store Message Params"},{"message":"0","varName":"","info":"0","ParamN":"3","separator":"","storage":"1","varName2":"winners","name":"Store Message Params"},{"behavior":"1","interpretation":"1","code":"msg.delete();\nconst Discord = require('discord.js');\nconst fs = require('fs');\nvar item = tempVars(\"itemGiving\");\nvar time = tempVars(\"time\");\nvar winners = tempVars(\"winners\");\n\nvar giveaway = {\n    \"itemGivingAway\": \"\",\n    \"time\": 0,\n    \"winner\": 1,\n    \"finishUnix\": 0,\n    \"channel\": \"\",\n    \"server\": msg.guild.id,\n    \"giveawayMessageID\": \"\",\n    \"id\": Math.floor(Math.random() * 999999) + 100000\n}\n\n\nif (item != null && time != null) {\n    giveaway[\"itemGivingAway\"] = item;\n    giveaway[\"channel\"] = msg.channel.id;\n\n    if (!isNaN(winners)) {\n        if (parseInt(winners) > 0) {\n            giveaway[\"winner\"] = parseInt(winners);\n        }\n    }\n    var tempTime = time;\n    if (tempTime.includes(\"d\") || tempTime.includes(\"h\") || tempTime.includes(\"w\") || tempTime.includes(\"m\")) {\n        let timeUp;\n\n        if (tempTime.includes(\"d\")) {\n            timeUp = \"d\";\n        } else if (tempTime.includes(\"h\")) {\n            timeUp = \"h\";\n        } else if (tempTime.includes(\"w\")) {\n            timeUp = \"w\";\n        } else if (tempTime.includes(\"m\")) {\n            timeUp = \"m\";\n        }\n\n        tempTime = tempTime.split(timeUp);\n        if (!isNaN(tempTime[0])) {\n            tempTime[0] = parseInt(tempTime[0]);\n            switch (timeUp) {\n                case \"d\":\n                    giveaway[\"time\"] = tempTime[0] * 86400;\n                    break;\n                case \"h\":\n                    giveaway[\"time\"] = tempTime[0] * 3600;\n                    break;\n                case \"w\":\n                    giveaway[\"time\"] = tempTime[0] * 604800;\n                    break;\n                case \"m\":\n                    giveaway[\"time\"] = tempTime[0] * 60;\n                    break;\n            }\n            giveaway[\"finishUnix\"] = Math.floor(Date.now() / 1000) + giveaway[\"time\"];\n            var giveawayEmbed = new Discord.RichEmbed({\n                color: 0x2E7F98,\n                author: {\n                    name: 'üéâ Nowy Giveaway üéâ',\n                    icon_url: (client || this.getDBM().Bot.bot).user.avatarURL\n                },\n                description: `Nowy giveaway na **${giveaway[\"itemGivingAway\"]}**\\n\\nZareaguj üéâ, aby wziƒÖƒá udzia≈Ç!`,\n                footer: {\n                    text: `Giveaway ko≈Ñczy siƒô ${new Date(giveaway[\"finishUnix\"] * 1000).toLocaleString(\"en-US\", { timeZone: 'UTC' })} UTC | ${giveaway[\"winner\"]} Wygrany(i) | ID: ${giveaway[\"id\"]}`\n                }\n            })\n\n            msg.channel.send(giveawayEmbed)\n                .then(giveMsg => {\n                    giveMsg.react(\"üéâ\");\n                    giveaway[\"giveawayMessageID\"] = giveMsg.id;\n                    fs.readFile('./data/giveawayData.json', function read(err, data) {\n                        if (err) {\n                            throw err;\n                        }\n                        data = JSON.parse(data);\n\n                        if (!data.hasOwnProperty(msg.guild.id)) {\n                            data[msg.guild.id] = [];\n                        }\n\n                        data[msg.guild.id].push(giveaway);\n\n                        fs.writeFile(\"./data/giveawayData.json\", JSON.stringify(data), function(err) {\n                            if (err) {\n                                return console.log(err);\n                            }\n                        });\n                    });\n                })\n\n        }\n\n    } else {\n        msg.channel.send(\"‚ùå U≈ºy≈Çe≈õ z≈Çgo czasu!\\n\\n1w | 1d | 1h | 1m\");\n    }\n\n} else {\n    msg.channel.send(\"‚ùå Podaj co najmniej przedmiot, kt√≥ry chcesz rozdaƒá i czas!\");\n}","storage":"0","varName":"","name":"Run Script"}],"event-type":"0"},{"name":"NewEvent","temp":"","event-type":"0","_id":"YmlGM","actions":[{"channel":"4","varName":"","message":"https://pastebin.com/iiZKaHRT","storage":"0","varName2":"","iffalse":"0","iffalseVal":"","name":"Send Message"}]},{"name":"status","permissions":"NONE","restriction":"1","_id":"yXrZZ","actions":[{"token":"","user":"","pass":"","url":"https://servers-live.fivem.net/api/servers/single/ADRES IP","path":"Data.clients","storage":"1","varName":"users","debugMode":"1","headers":"","name":"Store Json From WebAPI"},{"token":"","user":"","pass":"","url":"https://servers-live.fivem.net/api/servers/single/ADRES IP","path":"Data.hostname","storage":"1","varName":"hostname","debugMode":"1","headers":"","name":"Store Json From WebAPI"},{"token":"","user":"","pass":"","url":"https://servers-live.fivem.net/api/servers/single/ADRES IP","path":"EndPoint","storage":"1","varName":"ip","debugMode":"1","headers":"","name":"Store Json From WebAPI"},{"token":"","user":"","pass":"","url":"https://servers-live.fivem.net/api/servers/single/ADRES IP","path":"Data.players..name","storage":"1","varName":"names","debugMode":"1","headers":"","name":"Store Json From WebAPI"},{"token":"","user":"","pass":"","url":"https://servers-live.fivem.net/api/servers/single/ADRES IP","path":"Data.sv_maxclients","storage":"1","varName":"mnax","debugMode":"1","headers":"","name":"Store Json From WebAPI"},{"text":"${tempVars(\"names\")}","text2":"{\"statusCode\":200,\"success\":false}","text3":"Brak graczy na serwerze!","info":"0","storage":"1","varName":"names2","name":"Replace Text"},{"title":"STATUS","author":"","color":"#6abf43","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"ebm","name":"Create Embed Message"},{"storage":"1","varName":"ebm","message":"**Nazwa servera:** ${tempVars(\"hostname\")}\n\n**Adres IP:** ${tempVars(\"ip\")}\n\n**Ilo≈õƒá graczy:** ${tempVars(\"users\")}/${tempVars(\"mnax\")}\n\n**Gracze na serwerze:**\n${tempVars(\"names2\")}","name":"Set Embed Description"},{"storage":"1","varName":"ebm","message":"Status","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"ebm","channel":"0","varName2":"","storage3":"0","varName3":"","name":"Send Embed Message"}],"event-type":"0"}]